# Документация системы мониторинга и управления контейнерами Dockerever

## 1. Развертывание системы

### 1.1 Предварительные требования
- Установленные Docker и Docker Compose
- Доступ к интернету для загрузки образов
- Пользователь с правами выполнения Docker команд

### 1.2 Процесс развертывания
1. Клонировать репозиторий системы
2. Перейти в директорию проекта
3. Настроить серверы для мониторинга в файле `docker/prometheus.yml`
4. Скопировать файл окружения:
   ```bash
   cp .env_example .env
   ```
5. Редактировать .env файл с актуальными значениями (пример ниже)
6. Запустить скрипт развертывания:
   ```bash
   ./deploy.sh
   ```
### 1.3 Конфигурация окружения (.env)
```
DB_HOST=адрес субд
DB_PORT=порт субд
POSTGRES_USER=логин пользователя субд
POSTGRES_PASSWORD=пароль пользователя субд
POSTGRES_DB=база данных в субд 
SECRET_KEY=секретный ключ для хеширования
ALGORITHM=алгоритм хеширования
DOCKER_HOST_ADDR=адрес хоста docker
DOCKER_HOST_PORT=порт хоста docker
SUPER_ADMIN_USERNAME=логин начального пользователя системы
SUPER_ADMIN_PASSWORD=пароль начального пользователя системы
ACCESS_TOKEN_EXPIRE_MINUTES=время действия токена доступа в минутах
REFRESH_TOKEN_EXPIRE_MINUTES=время действия токена обновления в минутах
CORS_MODE=политика cors
```
### 1.4 Описание скрипта deploy.sh
Скрипт выполняет:
1. Проверку и установку Node Exporter
2. Остановку и удаление предыдущих контейнеров (при переустановке)
3. Запуск системы через Docker Compose
4. Инициализацию компонентов мониторинга

   
## 2. Документация API

Доступно по http://ip_или_домен/api/docs после развертывания системы. Представляет собой SwaggerUI страницу с интерактивными элементами для вызова методов.

При изменении кода: роутеров, схем - документация автоматически перегенерируется.

## 3. Ролевая модель доступа
1. *User*:
- Просмотр контейнеров и метрик
- Управление своими дашбордами

2. *Admin*:
- Все права User
- Управление пользователями (кроме Super Admin)
- Полный доступ к Docker объектам

3. *Super Admin*:
- Все права Admin
- Управление ролями пользователей
- Системные операции


